<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ÖBB Mobility Insights Dashboard - AI-powered customer feedback analysis">
    <title>ÖBB Mobility Insights Dashboard</title>
    <link rel="stylesheet" href="styles/styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <img src="assets/Logo_ÖBB.svg.png" alt="ÖBB Logo" class="logo-image">
                <div class="header-text">
                    <h1 class="header-title">Mobility Insights Dashboard</h1>
                    <p class="header-subtitle">Powered by AI – Hackathon Mobility & AI 2025</p>
                </div>
            </div>
            <nav class="header-nav">
                <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </nav>
        </div>
    </header>

    <div class="dashboard-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <nav class="sidebar-nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        <a href="#overview" class="nav-link active" data-section="overview">
                            <span class="nav-icon">
                                <img src="assets/chart-bar.svg" alt="Overview" width="20" height="20">
                            </span>
                            <span class="nav-text">Overview</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#sentiment-trends" class="nav-link" data-section="sentiment-trends">
                            <span class="nav-icon">
                                <img src="assets/chart-line.svg" alt="Sentiment Trends" width="20" height="20">
                            </span>
                            <span class="nav-text">Sentiment Trends</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#topic-evolution" class="nav-link" data-section="topic-evolution">
                            <span class="nav-icon">
                                <img src="assets/search.svg" alt="Topic Evolution" width="20" height="20">
                            </span>
                            <span class="nav-text">Topic Evolution</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#emerging-issues" class="nav-link" data-section="emerging-issues">
                            <span class="nav-icon">
                                <img src="assets/alert-triangle.svg" alt="Emerging Issues" width="20" height="20">
                            </span>
                            <span class="nav-text">Emerging Issues</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#recommendations" class="nav-link" data-section="recommendations">
                            <span class="nav-icon">
                                <img src="assets/bulb.svg" alt="Recommendations" width="20" height="20">
                            </span>
                            <span class="nav-text">Recommendations</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Overview Section -->
            <section id="overview" class="content-section active">
                <div class="section-header">
                    <h2 class="section-title">Overview</h2>
                    <p class="section-description">High-level insights from customer feedback analysis</p>
                </div>

                <!-- AI Hot Topic Banner -->
                <div class="hot-topic-banner" id="hotTopicBanner">
                    <div class="hot-topic-icon">
                        <img src="assets/urgent.svg" alt="Alert" class="icon-pulse">
                    </div>
                    <div class="hot-topic-content">
                        <div class="hot-topic-header">
                            <span class="hot-topic-label">AI HOT TOPIC OF THE WEEK</span>
                            <span class="hot-topic-timestamp" id="hotTopicTimestamp">Updated just now</span>
                        </div>
                        <p class="hot-topic-text" id="hotTopicText">
                            Loading AI-generated insights...
                        </p>
                    </div>
                </div>

                <div class="kpi-grid" id="kpiGrid">
                    <!-- KPI Cards will be populated by JavaScript -->
                    <div class="kpi-card" id="kpiTotalFeedback">
                        <div class="kpi-icon">
                            <img src="assets/file-pencil.svg" alt="Total Feedback" width="40" height="40">
                        </div>
                        <div class="kpi-content">
                            <h3 class="kpi-label">Total Feedback</h3>
                            <p class="kpi-value">--</p>
                        </div>
                    </div>
                    <div class="kpi-card" id="kpiAvgSentiment">
                        <div class="kpi-icon">
                            <img src="assets/mood-smile-beam.svg" alt="Average Sentiment" width="40" height="40">
                        </div>
                        <div class="kpi-content">
                            <h3 class="kpi-label">Avg. Sentiment</h3>
                            <p class="kpi-value">--</p>
                        </div>
                    </div>
                    <div class="kpi-card" id="kpiActiveIssues">
                        <div class="kpi-icon">
                            <img src="assets/bell-ringing.svg" alt="Active Issues" width="40" height="40">
                        </div>
                        <div class="kpi-content">
                            <h3 class="kpi-label">Active Issues</h3>
                            <p class="kpi-value">--</p>
                        </div>
                    </div>
                    <div class="kpi-card" id="kpiTopTopics">
                        <div class="kpi-icon">
                            <img src="assets/tag.svg" alt="Total Mentions" width="40" height="40">
                        </div>
                        <div class="kpi-content">
                            <h3 class="kpi-label">Total Mentions</h3>
                            <p class="kpi-value">--</p>
                        </div>
                    </div>
                </div>

                <div class="summary-container" id="summaryContainer">
                    <div class="insight-card">
                        <h3 class="card-title">Summary</h3>
                        <div class="card-content" id="overviewSummary">
                            <p>Loading summary data...</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Sentiment Trends Section -->
            <section id="sentiment-trends" class="content-section">
                <!-- Temporal Evolution by Category - MOVED TO TOP -->
                <div class="section-header">
                    <h2 class="section-title">Temporal Evolution by Category</h2>
                    <p class="section-description">Track how categories evolve over time</p>
                </div>

                <div class="time-range-selector">
                    <label class="time-range-label">Time Range:</label>
                    <div class="time-range-buttons">
                        <button class="time-range-btn" data-range="month">Month</button>
                        <button class="time-range-btn" data-range="quarter">Quarter</button>
                        <button class="time-range-btn" data-range="6months">6 Months</button>
                        <button class="time-range-btn" data-range="year">Year</button>
                        <button class="time-range-btn active" data-range="all">All Time</button>
                    </div>
                </div>

                <div class="chart-container" id="sentimentChart">
                    <canvas id="sentimentCanvas"></canvas>
                </div>

                <!-- Category Distribution Analysis -->
                <div class="section-header" style="margin-top: 3rem;">
                    <h2 class="section-title">Category Distribution Analysis</h2>
                    <p class="section-description">Overview of all feedback categories</p>
                </div>

                <!-- Doughnut Chart for Category Distribution -->
                <div class="doughnut-chart-wrapper">
                    <div class="chart-container doughnut-chart">
                        <canvas id="doughnutCanvas"></canvas>
                    </div>
                    
                    <!-- Category Legend Table -->
                    <div class="category-legend-table">
                        <h3 class="legend-title">Categories</h3>
                        <table class="category-table">
                            <tbody>
                                <tr class="category-row">
                                    <td class="color-indicator" style="background-color: #FF6B6B;"></td>
                                    <td class="category-name">Service</td>
                                    <td class="category-count" id="count-service">--</td>
                                </tr>
                                <tr class="category-row">
                                    <td class="color-indicator" style="background-color: #FFA07A;"></td>
                                    <td class="category-name">Delays</td>
                                    <td class="category-count" id="count-delays">--</td>
                                </tr>
                                <tr class="category-row">
                                    <td class="color-indicator" style="background-color: #FFD93D;"></td>
                                    <td class="category-name">Infrastructure</td>
                                    <td class="category-count" id="count-infrastructure">--</td>
                                </tr>
                                <tr class="category-row">
                                    <td class="color-indicator" style="background-color: #A8E6CF;"></td>
                                    <td class="category-name">User</td>
                                    <td class="category-count" id="count-user">--</td>
                                </tr>
                                <tr class="category-row">
                                    <td class="color-indicator" style="background-color: #87CEEB;"></td>
                                    <td class="category-name">Hygiene</td>
                                    <td class="category-count" id="count-hygiene">--</td>
                                </tr>
                                <tr class="category-row">
                                    <td class="color-indicator" style="background-color: #DDA0DD;"></td>
                                    <td class="category-name">Comfort</td>
                                    <td class="category-count" id="count-comfort">--</td>
                                </tr>
                                <tr class="category-row">
                                    <td class="color-indicator" style="background-color: #90EE90;"></td>
                                    <td class="category-name">Positive</td>
                                    <td class="category-count" id="count-positive">--</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Positive Feedback Distribution -->
                <div class="section-header" style="margin-top: 3rem;">
                    <h2 class="section-title">Positive Feedback Distribution</h2>
                    <p class="section-description">Breakdown of praise categories from customer reviews</p>
                </div>

                <div class="doughnut-chart-wrapper">
                    <div class="chart-container doughnut-chart">
                        <canvas id="positiveDoughnutCanvas"></canvas>
                    </div>
                    
                    <!-- Positive Category Legend Table -->
                    <div class="category-legend-table">
                        <h3 class="legend-title">Praise Categories</h3>
                        <table class="category-table">
                            <tbody id="positiveCategoryTableBody">
                                <!-- Will be populated dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Topic Evolution Section -->
            <section id="topic-evolution" class="content-section">
                <div class="section-header">
                    <h2 class="section-title">Topic Evolution Over Time</h2>
                    <p class="section-description">Stacked area chart showing how topics evolve chronologically</p>
                </div>

                <div class="time-range-selector">
                    <label class="time-range-label">Time Range:</label>
                    <div class="time-range-buttons">
                        <button class="time-range-btn-topics" data-range="month">Month</button>
                        <button class="time-range-btn-topics" data-range="quarter">Quarter</button>
                        <button class="time-range-btn-topics" data-range="6months">6 Months</button>
                        <button class="time-range-btn-topics" data-range="year">Year</button>
                        <button class="time-range-btn-topics active" data-range="all">All Time</button>
                    </div>
                </div>

                <div class="chart-container" id="topicsChart">
                    <canvas id="stackedAreaCanvas"></canvas>
                </div>

                <div class="section-header" style="margin-top: 3rem;">
                    <h2 class="section-title">Top Topics Ranking</h2>
                    <p class="section-description">Most frequent topics in customer feedback</p>
                </div>

                <div class="chart-container" id="topTopicsChart" style="min-height: 450px;">
                    <canvas id="horizontalBarCanvas"></canvas>
                </div>

                <div class="topics-list" style="margin-top: 3rem;">
                    <h3 class="subsection-title">Topic Statistics</h3>
                    <div id="topicsContainer" class="topics-grid">
                        <!-- Topic cards will be populated by JavaScript -->
                        <div class="insight-card topic-placeholder">
                            <h4 class="card-subtitle">Loading topics...</h4>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Emerging Issues Section -->
            <section id="emerging-issues" class="content-section">
                <div class="section-header">
                    <h2 class="section-title">Emerging Issues</h2>
                    <p class="section-description">Track growth trends for each issue category over time</p>
                </div>

                <div class="time-range-selector">
                    <label class="time-range-label">Time Range:</label>
                    <div class="time-range-buttons">
                        <button class="time-range-btn-issues" data-range="month">Month</button>
                        <button class="time-range-btn-issues" data-range="quarter">Quarter</button>
                        <button class="time-range-btn-issues" data-range="6months">6 Months</button>
                        <button class="time-range-btn-issues" data-range="year">Year</button>
                        <button class="time-range-btn-issues active" data-range="all">All Time</button>
                    </div>
                </div>

                <div class="chart-container" id="issuesChart">
                    <canvas id="issuesTrendCanvas"></canvas>
                </div>

                <div class="issues-grid" id="issuesContainer">
                    <!-- Issue cards will be populated by JavaScript -->
                    <div class="insight-card issue-card">
                        <div class="issue-severity">
                            <span class="severity-badge">--</span>
                        </div>
                        <h3 class="card-title">Loading issues...</h3>
                        <p class="card-content">Issue details will appear here</p>
                        <div class="issue-meta">
                            <span class="issue-count">-- mentions</span>
                            <span class="issue-trend">--</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Recommendations Section -->
            <section id="recommendations" class="content-section">
                <div class="section-header">
                    <h2 class="section-title">Recommendations</h2>
                    <p class="section-description">Actionable insights to improve customer experience</p>
                </div>

                <div class="recommendations-container">
                    <div id="recommendationsList" class="recommendations-list">
                        <!-- Recommendations will be populated by JavaScript -->
                        <div class="insight-card recommendation-card">
                            <div class="recommendation-header">
                                <span class="recommendation-priority">Loading...</span>
                                <span class="recommendation-category">--</span>
                            </div>
                            <h3 class="card-title">Recommendations loading...</h3>
                            <p class="card-content">Detailed recommendations will appear here</p>
                            <div class="recommendation-footer">
                                <span class="recommendation-impact">Expected Impact: --</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 ÖBB Mobility Insights Dashboard | AI Hackathon Project</p>
            <p class="footer-meta">Data updated: <span id="lastUpdated">--</span></p>
        </div>
    </footer>

    <!-- JavaScript -->
    <!-- Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- Load environment variables first (dev only) -->
    <script src="env-loader.js"></script>
    <!-- Load configuration -->
    <script src="js/config.js"></script>
    <!-- Load charts module -->
    <script type="module" src="js/charts.js"></script>
    <!-- Load main application -->
    <script type="module" src="js/main.js"></script>
</body>
</html>
